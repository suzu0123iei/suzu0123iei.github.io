const I18N = {
      ja: {
        "brand.sub":"ミニマルガイド",
        "brand.tagline":"Clean / Simple / Sharp",
        "nav.overview":"ゲーム概要",
        "nav.tips":"初心者のコツ",
        "nav.ships":"ポイント＆艦艇",
        "nav.youtuber":"YouTuber",
        "nav.faq":"FAQ",
        "top.pill":"No install • Quick play",
        "btn.play":"今すぐプレイ",
        "btn.ships":"ポイント＆艦艇を見る",
        "btn.youtuber":"YouTuberを見る",
        "btn.reset":"リセット",
        "drawer.title":"メニュー",

        "hero.kicker":"初心者向け非公式ガイド",
        "hero.title":'mk48.io を <span class="accent nobr">“楽しもう”</span><br><span class="nobr">初心者向け非公式</span><br>サイト',
        "hero.lead":"",

        "mini.install.title":"インストール不要",
        "mini.install.desc":"開いてすぐ遊べる",
        "mini.online.title":"オンライン海戦ゲーム",
        "mini.online.desc":"他プレイヤーとリアルタイム対戦できます",

        "chip.a":"Vision / Spot first",
        "chip.b":"Angles / Side pressure",
        "chip.c":"Tempo / Disengage",
        "side.msg.1":"覚えるのは3つだけ。",
        "side.msg.2":"①先に見つける　②横から角度　③削られたら退く。",
        "side.msg.3":"これでプレイが <span class='hi'>スマート</span> になります。",
        "tab.tips":"初心者のコツ",
        "tab.overview":"ゲーム概要",

        "overview.h2":"ゲーム概要",
        "overview.p":"",
        "overview.block.title":"オンライン海戦ゲーム / 他プレイヤーとリアルタイム対戦できます",
        "overview.block.game":"mk48.io は Softbear Studios が制作した、オンラインのマルチプレイヤー海戦（艦艇バトル）ゲームです。ブラウザで遊べて、基本的にインストール不要で始められます。小さな艦からスタートし、クレート（pt）を集めたり敵艦を撃沈したりしてスコアを伸ばすことで、艦がレベルアップしていきます。",
        "overview.block.aimTitle":"このサイトの狙い",
        "overview.block.aim":"このサイトは、mk48.io を、これから始める初心者さんが迷わず楽しめるようにするための「非公式」ガイドです。mk48.io は、クレート（pt）を集めたり敵艦を撃沈したりしてスコアを伸ばし、艦をレベルアップさせて強くしていくゲームですが、最初は仕組みや艦艇の違いが分かりにくいことがあります。そこで本サイトでは、レベル到達の目安・艦艇一覧・ゲームの基本などを、できるだけ分かりやすく整理してまとめ、短時間で全体像をつかめるようにします。※本サイトはファンメイドの非公式サイトで、開発元（Softbear）とはまったく関係ありません。",

        "features.h2":"mk48.io の特徴",
        "features.p":"大事なポイントを3つに整理しました。",
        "features.1.title":"ブラウザで手軽に遊べる（インストール不要）",
        "features.1.desc":"mk48.io は Webブラウザで遊べるオンライン海戦ゲームです。アカウント作成やアプリのインストールは不要で、ページを開けばすぐにプレイできます。PCやスマホがあれば、どこからでも気軽に始められるのが特徴です。(PC推奨)",
        "features.2.title":"クレート（pt）集め＋撃沈で成長するシステム",
        "features.2.desc":"プレイヤーは小さな船からスタートし、海に落ちている クレート（pt）を集めたり、他プレイヤーの船を撃沈したりしてポイントを稼ぎます。ポイントが一定量に達するとレベルアップし、より強力な船へアップグレードしていくことができます。",
        "features.3.title":"リアルタイムで対戦する海戦アクション",
        "features.3.desc":"mk48.io は リアルタイムのマルチプレイヤー対戦が魅力です。同じ海にいる他プレイヤーと戦うため、攻撃するだけでなく 魚雷を避ける操作や位置取りなどの戦略的な動きも重要になります。緊張感のある海戦バトルを楽しめます。",

        "tips.h2":"初心者のコツ",
        "tips.p":"",
        "tips.block1.title":"序盤は“キル”より「安全にpt稼ぎ」",
        "tips.block1.body":"mk48.io は クレート（pt）の回収や敵艦の撃沈でポイントを稼ぎ、レベルアップしていくのが基本です。初心者のうちは、無理に追いかけてキルを狙うよりも、クレートを拾いながら、安全にポイントを稼ぐことを意識すると安定します。狙うなら、すでに削れている相手など、倒しきれそうな場面だけに絞るのがおすすめです。",
        "tips.block2.title":"艦隊を作って「艦隊行動」すると一気に楽になる",
        "tips.block2.body":"初心者は「単独で突っ込む」よりも、味方の近くで一緒に動くだけで生存率が上がります。危なくなったら合流し、無理だと思ったら引く――これだけでも戦いやすくなります。",
        "tips.block3.title":"最後に：とにかく楽しもう！",
        "tips.block3.body":"最初は分からないことが多くて当たり前です。プレイしながら少しずつ覚えていけば大丈夫なので、まずは気楽に楽しんでみてください！",

        "ships.h2":"レベル到達ポイント早見＆艦艇一覧",
        "ships.p":"レベル別にまとめました。検索・フィルターで最短で探せます。"
        ,"ships.panelTitle":"レベル到達ポイント早見（Wiki）＆艦艇一覧"
        ,"ships.panelNote":"※ 表示言語は上部で切替"
        ,"ships.notes":"<b>表記の見方</b><br>速力(kn) / 耐久 / 対空 / 隠密 / 主(主兵装 上位3つだけ)<br>（主兵装が4つ以上ある艦は末尾に「…」を付けています）"
        ,"ships.searchLabel":"検索"
        ,"ships.searchPh":"例：Iowa / 戦艦 / 潜水艦 / stealth"
        ,"ships.levelLabel":"レベル"
        ,"ships.typeLabel":"艦種"
        ,"ships.pointsTitle":"レベル到達ポイント早見（Wiki）"
        ,"ships.pointsRange":"Lv1〜Lv10"
        ,"ships.listTitle":"艦艇一覧（レベル別）"
        ,"ships.optAll":"All",
        "ships.note":"表記の見方：<code>速力(kn)</code> / <code>耐久</code> / <code>対空</code> / <code>隠密</code> / <code>主（上位3つ）</code>",
        "points.th.level":"レベル",
        "points.th.pt":"到達ポイント（pt）",

        "yt.h2":"おすすめYouTuber",
        "yt.p":"mk48.io をより楽しむために、参考になるYouTuberの方を、非公式ながらご紹介させていただきます。",
        "yt.name":"● Seiran（Seiran様）",
        "yt.desc":"mk48.io を遊ぶうえで、潜水艦の立ち回りや戦い方のコツなどが気になったときに参考になる動画を発信されています。「どう動けばいいのか」「どう戦うと生き残りやすいのか」といった点を知りたい方は、チェックしてみるのがおすすめです。",
        "yt.btn":"YouTubeチャンネルを見る",

        "faq.h2":"FAQ",
        "faq.p":"よくある質問。",
        "faq.q1.q":"Q. このサイトは公式？",
        "faq.q1.a":"いいえ。本サイトはファンによる非公式サイトです。ゲームの運営・開発元とは関係ありません。またファンメイドの為、翻訳がうまくいってない可能性がありますが、ご了承ください。",
        "faq.q2.q":"Q. どうやったらうまくなりますか？",
        "faq.q2.a":"A. どのゲームでも言えることですが、遊んでいくうちに少しずつ上達していきます。より早く上達したい場合は、上手い人の動きや立ち回りを真似するのがおすすめです。加えて、トレーニングルームで1vs1をして練習してみるのも良いでしょう。",
        "faq.q3.q":"Q. 荒らし・暴言を言っている人がいたらどうすればいいですか？",
        "faq.q3.a":"A. 口論はせず、まずは落ち着いて対応しましょう。mk48.io にはミュート機能があるので、気になる相手はミュートするのがおすすめです。また、悪質だと感じる場合は、必要に応じて通報しましょう。",

        "footer":"※本サイトはファンメイドの非公式サイトです。mk48.io の運営・開発元（Softbear Studios）とは関係ありません。仕様変更により情報が古い場合があります。"
      },

      en: {
        "brand.sub":"Minimal Guide",
        "brand.tagline":"Clean / Simple / Sharp",
        "nav.overview":"Overview",
        "nav.tips":"Beginner Tips",
        "nav.ships":"Points & Ships",
        "nav.youtuber":"YouTuber",
        "nav.faq":"FAQ",
        "top.pill":"No install • Quick play",
        "btn.play":"Play now",
        "btn.ships":"View points & ships",
        "btn.youtuber":"View YouTuber",
        "btn.reset":"Reset",
        "drawer.title":"Menu",

        "hero.kicker":"Unofficial beginner guide",
        "hero.title":'<span class="accent nobr">Enjoy</span> mk48.io<br><span class="nobr">A fan-made</span><br>beginner site',
        "hero.lead":"",

        "mini.install.title":"No installation",
        "mini.install.desc":"Open and play instantly",
        "mini.online.title":"Online naval battles",
        "mini.online.desc":"Real-time PvP with other players",

        "chip.a":"Vision / Spot first",
        "chip.b":"Angles / Side pressure",
        "chip.c":"Tempo / Disengage",
        "side.msg.1":"Only 3 things to remember.",
        "side.msg.2":"1) Spot first  2) Take angles  3) Back off when chipped.",
        "side.msg.3":"That’s how you play <span class='hi'>smart</span>.",
        "tab.tips":"Beginner Tips",
        "tab.overview":"Overview",

        "overview.h2":"Overview",
        "overview.p":"",
        "overview.block.title":"Online naval game / Real-time PvP",
        "overview.block.game":"mk48.io is an online multiplayer naval battle game by Softbear Studios. It runs in your browser—typically no installation needed. Start in a small ship, collect crates (pt) and sink enemies to score. As you gain points, your ship levels up into stronger vessels.",
        "overview.block.aimTitle":"Purpose of this site",
        "overview.block.aim":"This is a fan-made, unofficial guide to help new players enjoy mk48.io without getting lost. The game revolves around collecting crates (pt), sinking enemies, and leveling up—but the mechanics and ship differences can be confusing at first. Here, we organize level point milestones, ship lists, and core basics so you can grasp the big picture quickly. This site is not affiliated with the developer (Softbear).",

        "features.h2":"What makes mk48.io fun",
        "features.p":"Key points, summarized in 3 bullets.",
        "features.1.title":"Play easily in your browser (no install)",
        "features.1.desc":"mk48.io is a browser-based online naval game. No account creation or app installation is required—open the page and play. Works on PC and mobile (PC recommended).",
        "features.2.title":"Grow by crates (pt) + sinks",
        "features.2.desc":"You start small and earn points by collecting crates (pt) and sinking other players. Hit point thresholds to level up into stronger ships.",
        "features.3.title":"Real-time PvP naval action",
        "features.3.desc":"Because you fight real players in the same sea, positioning and dodging torpedoes matter as much as shooting. The tension is the fun.",

        "tips.h2":"Beginner Tips",
        "tips.p":"",
        "tips.block1.title":"Early game: prioritize safe pt over kills",
        "tips.block1.body":"Progress comes from collecting crates (pt) and sinking ships. As a beginner, don’t over-chase kills—pick up crates and farm points safely. If you go for a kill, choose targets that are already damaged and finishable.",
        "tips.block2.title":"Move as a fleet—it gets easier fast",
        "tips.block2.body":"Instead of diving in alone, just staying near teammates improves survival. Regroup when pressured, and disengage when it feels bad—simple, but effective.",
        "tips.block3.title":"Finally: just enjoy it",
        "tips.block3.body":"It’s normal to feel lost at first. You’ll learn naturally as you play—so start relaxed and have fun.",

        "ships.h2":"Level Point Cheatsheet & Ship List",
        "ships.p":"Grouped by level. Use search & filters to find ships quickly."
        ,"ships.panelTitle":"Level Points (Wiki) & Ship List"
        ,"ships.panelNote":"* Change language at the top"
        ,"ships.searchLabel":"Search"
        ,"ships.searchPh":"e.g. Iowa / battleship / submarine / stealth"
        ,"ships.levelLabel":"Level"
        ,"ships.typeLabel":"Type"
        ,"ships.pointsTitle":"Level Points (Wiki)"
        ,"ships.pointsRange":"Lv1–Lv10"
        ,"ships.listTitle":"Ship List (by level)"
        ,"ships.optAll":"All"
        ,"ships.notes":"<b>Notation</b><br>Shown as speed(kn) / HP / AA / stealth / main weapons (top 3).<br>(If a ship has 4+ main weapons, we add “…” at the end.)"
,
        "ships.note":"Notation: <code>Speed(kn)</code> / <code>Durability</code> / <code>AA</code> / <code>Stealth</code> / <code>Main (top 3)</code>",
        "points.th.level":"Level",
        "points.th.pt":"Points (pt)",

        "yt.h2":"Recommended YouTuber",
        "yt.p":"Unofficial pick: here’s a channel many players find helpful.",
        "yt.name":"● Seiran",
        "yt.desc":"If you’re curious about submarine positioning and survival patterns in mk48.io, Seiran shares helpful videos. If you want practical movement ideas and “how to stay alive,” it’s worth checking out.",
        "yt.btn":"Open YouTube channel",

        "faq.h2":"FAQ",
        "faq.p":"Common questions.",
        "faq.q1.q":"Q. Is this site official?",
        "faq.q1.a":"No. This is a fan-made unofficial site and is not affiliated with the game’s operator/developer. Also, translations may not be perfect—thank you for understanding.",
        "faq.q2.q":"Q. How do I get better?",
        "faq.q2.a":"A. Like any game, you’ll improve gradually by playing. If you want to improve faster, copy strong players’ positioning and patterns. Also, practicing 1v1 in a training room can help.",
        "faq.q3.q":"Q. What if someone is toxic or abusive?",
        "faq.q3.a":"A. Don’t argue—stay calm. mk48.io has a mute feature, so muting is recommended. If it feels malicious, report when appropriate.",

        "footer":"This is a fan-made unofficial site. Not affiliated with mk48.io’s operator/developer (Softbear Studios). Some info may become outdated due to game updates."
      },

      zh: {
        "brand.sub":"极简指南",
        "brand.tagline":"Clean / Simple / Sharp",
        "nav.overview":"游戏概览",
        "nav.tips":"新手技巧",
        "nav.ships":"点数与舰艇",
        "nav.youtuber":"YouTuber",
        "nav.faq":"FAQ",
        "top.pill":"无需安装 • 打开即玩",
        "btn.play":"立即开始",
        "btn.ships":"查看点数与舰艇",
        "btn.youtuber":"查看 YouTuber",
        "btn.reset":"重置",
        "drawer.title":"菜单",

        "hero.kicker":"新手向非官方指南",
        "hero.title":'<span class="accent nobr">一起玩</span> mk48.io<br><span class="nobr">新手向非官方</span><br>站点',
        "hero.lead":"",

        "mini.install.title":"无需安装",
        "mini.install.desc":"打开页面马上玩",
        "mini.online.title":"在线海战游戏",
        "mini.online.desc":"与其他玩家实时对战",

        "chip.a":"视野 / 先发现",
        "chip.b":"角度 / 侧向压制",
        "chip.c":"节奏 / 撤退",
        "side.msg.1":"只记住 3 件事。",
        "side.msg.2":"①先发现 ②找角度 ③被消耗就撤。",
        "side.msg.3":"这样就能打得更 <span class='hi'>聪明</span>。",
        "tab.tips":"新手技巧",
        "tab.overview":"游戏概览",

        "overview.h2":"游戏概览",
        "overview.p":"",
        "overview.block.title":"在线海战 / 实时对战",
        "overview.block.game":"mk48.io 是 Softbear Studios 制作的在线多人海战（舰艇对战）游戏。浏览器即可游玩，通常无需安装。从小船开始，通过收集箱子（pt）与击沉敌舰来获得分数。达到阈值后，舰艇会升级到更强的船。",
        "overview.block.aimTitle":"本站目的",
        "overview.block.aim":"本站为粉丝制作的非官方指南，帮助新手更顺畅地体验 mk48.io。游戏以收集箱子（pt）、击沉敌舰、升级舰艇为核心，但一开始机制与舰艇差异可能不太直观。本站整理升级点数、舰艇列表与基础要点，帮助你快速掌握全貌。本站与开发方（Softbear）无关。",

        "features.h2":"mk48.io 的特点",
        "features.p":"把重点整理成 3 点。",
        "features.1.title":"浏览器轻松游玩（无需安装）",
        "features.1.desc":"mk48.io 是浏览器在线海战游戏，无需注册或安装，打开页面即可游玩。PC/手机均可（推荐PC）。",
        "features.2.title":"收集 pt + 击沉实现成长",
        "features.2.desc":"从小船起步，靠收集箱子（pt）与击沉敌舰来积累点数。达到阈值后升级到更强的舰艇。",
        "features.3.title":"实时多人对战海战动作",
        "features.3.desc":"同一海域与其他玩家实时对战，位置与躲鱼雷同样重要，紧张感十足。",

        "tips.h2":"新手技巧",
        "tips.p":"",
        "tips.block1.title":"前期别硬追人：先安全刷 pt",
        "tips.block1.body":"mk48.io 通过收集箱子（pt）与击沉敌舰来升级。新手阶段不要强追击杀，优先捡箱子、稳定刷点。想击杀就选择已经残血、容易收掉的目标。",
        "tips.block2.title":"组队行动会轻松很多",
        "tips.block2.body":"别单独冲。靠近队友一起移动，生存率立刻提升。危险就合流，感觉不妙就撤退——简单但有效。",
        "tips.block3.title":"最后：先享受游戏",
        "tips.block3.body":"一开始不懂很正常。边玩边学就行，先轻松地享受海战吧！",

        "ships.h2":"等级点数速查 & 舰艇列表",
        "ships.p":"按等级整理。用搜索和筛选快速找到舰艇。"
        ,"ships.panelTitle":"等级点数（Wiki）& 舰艇列表"
        ,"ships.panelNote":"※ 语言可在顶部切换"
        ,"ships.notes":"<b>标注说明</b><br>显示为 速度(kn) / 耐久 / 防空 / 隐蔽 / 主武器（仅显示前3个）。<br>（若主武器≥4个，末尾会加“…”）"
        ,"ships.searchLabel":"搜索"
        ,"ships.searchPh":"例：Iowa / 战列舰 / 潜艇 / stealth"
        ,"ships.levelLabel":"等级"
        ,"ships.typeLabel":"类型"
        ,"ships.pointsTitle":"等级点数（Wiki）"
        ,"ships.pointsRange":"Lv1–Lv10"
        ,"ships.listTitle":"舰艇列表（按等级）"
        ,"ships.optAll":"All",
        "ships.note":"标记说明：<code>速度(kn)</code> / <code>耐久</code> / <code>防空</code> / <code>隐蔽</code> / <code>主武器（前3）</code>",
        "points.th.level":"等级",
        "points.th.pt":"点数（pt）",

        "yt.h2":"推荐 YouTuber",
        "yt.p":"非官方推荐：很多玩家觉得很有帮助的频道。",
        "yt.name":"● Seiran",
        "yt.desc":"如果你想了解潜艇的走位、打法与生存技巧，Seiran 的视频会很有参考价值。想知道“怎么动更安全、怎么打更稳”，可以去看看。",
        "yt.btn":"打开 YouTube 频道",

        "faq.h2":"FAQ",
        "faq.p":"常见问题。",
        "faq.q1.q":"Q. 这是官网吗？",
        "faq.q1.a":"不是。本网站为粉丝制作的非官方站点，与游戏运营/开发方无关。由于为粉丝翻译，可能存在翻译不够准确的情况，敬请谅解。",
        "faq.q2.q":"Q. 怎么才能变强？",
        "faq.q2.a":"A. 任何游戏都会在游玩中逐渐进步。想更快提升的话，建议学习高手的走位与思路；另外也可以在训练房进行 1v1 练习。",
        "faq.q3.q":"Q. 遇到喷子/辱骂怎么办？",
        "faq.q3.a":"A. 不要争吵，先冷静处理。mk48.io 有静音功能，建议直接静音对方；如果觉得恶劣，可在必要时进行举报。",

        "footer":"本站为粉丝制作的非官方站点，与 mk48.io 运营/开发方（Softbear Studios）无关。游戏更新可能导致部分信息过期。"
      }
    };

    // ---------------------------
    // Data
    // ---------------------------
    const LEVEL_POINTS = [
      { level: 1, pt: 0 },
      { level: 2, pt: 30 },
      { level: 3, pt: 80 },
      { level: 4, pt: 160 },
      { level: 5, pt: 270 },
      { level: 6, pt: 420 },
      { level: 7, pt: 630 },
      { level: 8, pt: 940 },
      { level: 9, pt: 1430 },
      { level: 10, pt: 2260 }
    ];

    const TYPE_LABELS = {
      ja: {
        "motor_torpedo_boat":"モーター魚雷艇",
        "ram_ship":"ラム艦",
        "destroyer":"駆逐艦",
        "submarine":"潜水艦",
        "hovercraft":"ホバークラフト",
        "pirate":"海賊",
        "dreadnought":"ドレッドノート",
        "minelayer":"機雷敷設艦",
        "corvette":"コルベット",
        "dredger":"浚渫船",
        "cruiser":"クルーザー",
        "tanker":"タンカー",
        "carrier":"空母",
        "littoral":"沿海域戦闘艦",
        "icebreaker":"砕氷船",
        "battleship":"戦艦"
      },
      en: {
        "motor_torpedo_boat":"Motor torpedo boat",
        "ram_ship":"Ram ship",
        "destroyer":"Destroyer",
        "submarine":"Submarine",
        "hovercraft":"Hovercraft",
        "pirate":"Pirate",
        "dreadnought":"Dreadnought",
        "minelayer":"Minelayer",
        "corvette":"Corvette",
        "dredger":"Dredger",
        "cruiser":"Cruiser",
        "tanker":"Tanker",
        "carrier":"Aircraft carrier",
        "littoral":"Littoral combat ship",
        "icebreaker":"Icebreaker",
        "battleship":"Battleship"
      },
      zh: {
        "motor_torpedo_boat":"摩托鱼雷艇",
        "ram_ship":"冲角舰",
        "destroyer":"驱逐舰",
        "submarine":"潜艇",
        "hovercraft":"气垫船",
        "pirate":"海盗",
        "dreadnought":"无畏舰",
        "minelayer":"布雷舰",
        "corvette":"轻型护卫舰",
        "dredger":"挖泥船",
        "cruiser":"巡洋舰",
        "tanker":"油轮",
        "carrier":"航母",
        "littoral":"近海战斗舰",
        "icebreaker":"破冰船",
        "battleship":"战列舰"
      }
    };

    // Ship images: put files in assets/ships/ (optional). If missing, we show a clean placeholder.
    const SHIPS = [
      // Lv1
      {
        level: 1,
        key:"fairmile_d",
        name:"Fairmile D",
        type:"motor_torpedo_boat",
        speed: 31.0, hp: 1.17, aa: 0.11, stealth: null,
        main:["Mark 18×2","57 x 441 mmR×2","Mark 9×4","…"],
        desc:{
          ja:"魚雷＋機関砲＋爆雷を積んだ、近距離の突撃＆対潜もこなせる小型艇。",
          en:"A close-range raider with torps, guns, and depth charges—also usable for ASW.",
          zh:"近距离突击小艇：鱼雷+机炮+深弹，兼顾反潜。"
        },
        tags:{
          ja:["近距離","水上艦","機動力","魚雷","対潜"],
          en:["Close","Surface","Mobility","Torpedoes","ASW"],
          zh:["近距离","水面","机动","鱼雷","反潜"]
        }
      },
      {
        level: 1,
        key:"g_5",
        name:"G-5",
        type:"motor_torpedo_boat",
        speed: 53.0, hp: 0.63, aa: 0.10, stealth: null,
        main:["Type 53×2"],
        desc:{
          ja:"超高速で接近して魚雷を当てて逃げる“ヒット＆アウェイ”特化。",
          en:"Hit-and-run specialist: extreme speed, rush in, land torps, get out.",
          zh:"“打了就跑”特化：超高速突入命中鱼雷后撤离。"
        },
        tags:{
          ja:["近距離","水上艦","機動力","魚雷"],
          en:["Close","Surface","Mobility","Torpedoes"],
          zh:["近距离","水面","机动","鱼雷"]
        }
      },
      {
        level: 1,
        key:"komar",
        name:"Komar",
        type:"motor_torpedo_boat",
        speed: 43.9, hp: 0.85, aa: 0.10, stealth: null,
        main:["Type 53×2","25 x 129 mmR×2","Mark 9×4","…"],
        desc:{
          ja:"魚雷に加えて機関砲と爆雷も持ち、近距離で器用に戦える小型艇。",
          en:"A versatile close-range boat with torps + guns, plus depth charges for ASW.",
          zh:"近距离多用途：鱼雷+机炮，并带深弹可反潜。"
        },
        tags:{
          ja:["近距離","水上艦","機動力","魚雷","対潜"],
          en:["Close","Surface","Mobility","Torpedoes","ASW"],
          zh:["近距离","水面","机动","鱼雷","反潜"]
        }
      },
      {
        level: 1,
        key:"olympias",
        name:"Olympias",
        type:"ram_ship",
        speed: 31.1, hp: 1.23, aa: 0.11, stealth: null,
        main:["—"],
        desc:{
          ja:"衝角（ラム）でぶつけて倒す艦で、“体当たり”が主役。",
          en:"A ramming ship—your main weapon is literally the ram.",
          zh:"冲角舰：主要靠“撞击”击沉对手。"
        },
        tags:{
          ja:["近距離","水上艦","機動力","特殊（ラム）"],
          en:["Close","Surface","Mobility","Special (Ram)"],
          zh:["近距离","水面","机动","特殊(冲角)"]
        }
      },
      {
        level: 1,
        key:"pt_34",
        name:"PT-34",
        type:"motor_torpedo_boat",
        speed: 40.9, hp: 0.77, aa: 0.10, stealth: null,
        main:["Mark 18×4"],
        desc:{
          ja:"魚雷4本搭載で、素直で扱いやすい高速艇。",
          en:"Straightforward fast boat with 4 torpedoes—easy to pick up.",
          zh:"四联装鱼雷，高速且上手简单。"
        },
        tags:{
          ja:["近距離","水上艦","機動力","魚雷"],
          en:["Close","Surface","Mobility","Torpedoes"],
          zh:["近距离","水面","机动","鱼雷"]
        }
      },

      // Lv2
      {
        level: 2,
        key:"momi",
        name:"Momi",
        type:"destroyer",
        speed: 36.0, hp: 2.84, aa: 0.18, stealth: null,
        main:["Mark 18×4","127 x 680 mmR×3","Mark 9×4","…"],
        desc:{
          ja:"魚雷・砲・爆雷を一通り積んだ、バランス型の“入門駆逐艦”。",
          en:"Beginner-friendly destroyer—balanced loadout with torps, guns, and ASW.",
          zh:"入门驱逐舰：鱼雷/火炮/深弹齐全，均衡好用。"
        },
        tags:{ ja:["中距離","水上艦","汎用","魚雷","対潜"], en:["Mid","Surface","All-round","Torpedoes","ASW"], zh:["中距离","水面","全能","鱼雷","反潜"] }
      },
      {
        level: 2,
        key:"type_viic",
        name:"Type VII C",
        type:"submarine",
        speed: 17.6, hp: 2.24, aa: null, stealth: null,
        main:["Mark 18×5","57 x 441 mmR×1"],
        desc:{
          ja:"魚雷主体で潜って狙い撃ちする、基本を学べる潜水艦。",
          en:"A fundamentals submarine—dive and pick targets with torpedoes.",
          zh:"基础潜艇：下潜伏击，主要依靠鱼雷。"
        },
        tags:{ ja:["中距離","潜水艦","魚雷"], en:["Mid","Submarine","Torpedoes"], zh:["中距离","潜艇","鱼雷"] }
      },
      {
        level: 2,
        key:"zubr",
        name:"Zubr",
        type:"hovercraft",
        speed: 55.0, hp: 1.90, aa: 0.14, stealth: null,
        main:["OF-45×9","25 x 129 mmR×2"],
        desc:{
          ja:"超高速＋ロケットで近〜中距離を荒らせる“走って撃つ”特殊枠。",
          en:"Special pick: very fast hovercraft with rockets—run-and-gun disruption.",
          zh:"特殊气垫船：超高速+火箭，跑打骚扰很强。"
        },
        tags:{ ja:["中距離","水上艦","機動力","ロケット"], en:["Mid","Surface","Mobility","Rockets"], zh:["中距离","水面","机动","火箭"] }
      },

      // Lv3
      {
        level: 3,
        key:"east_indiaman",
        name:"East Indiaman",
        type:"pirate",
        speed: 7.8, hp: 1.76, aa: 0.13, stealth: null,
        main:["Cannon Ball×10"],
        desc:{
          ja:"遅い代わりに砲で撃ってくる“NPC用の的・ネタ枠”。",
          en:"Slow but fires cannons—more of a quirky/NPC-style pick.",
          zh:"速度慢但能炮击，偏“趣味/靶子”定位。"
        },
        tags:{ ja:["中距離","水上艦","砲撃","特殊（NPC）"], en:["Mid","Surface","Gunnery","Special (NPC)"], zh:["中距离","水面","炮击","特殊(NPC)"] }
      },
      {
        level: 3,
        key:"espana",
        name:"España",
        type:"dreadnought",
        speed: 19.4, hp: 4.61, aa: 0.26, stealth: null,
        main:["300 x 1400 mmR×8"],
        desc:{
          ja:"大口径砲で中〜遠距離から殴る、砲撃に寄った重装甲枠。",
          en:"Heavy armor + big guns—leans into mid-to-long range gunnery.",
          zh:"重装甲大口径炮，适合中远距离炮战。"
        },
        tags:{ ja:["遠距離","水上艦","砲撃","防衛"], en:["Long","Surface","Gunnery","Defense"], zh:["远距离","水面","炮击","防御"] }
      },
      {
        level: 3,
        key:"freccia",
        name:"Freccia",
        type:"destroyer",
        speed: 30.0, hp: 3.21, aa: 0.20, stealth: null,
        main:["Mark 18×6","127 x 680 mmR×4","Mark 9×2","…"],
        desc:{
          ja:"魚雷と砲と爆雷で前線を回す、攻守バランスの駆逐艦。",
          en:"Balanced destroyer—torps, guns, and ASW for frontline work.",
          zh:"均衡驱逐舰：鱼雷+火炮+反潜，适合前线。"
        },
        tags:{ ja:["中距離","水上艦","汎用","魚雷","対潜"], en:["Mid","Surface","All-round","Torpedoes","ASW"], zh:["中距离","水面","全能","鱼雷","反潜"] }
      },
      {
        level: 3,
        key:"lublin",
        name:"Lublin",
        type:"minelayer",
        speed: 16.5, hp: 3.19, aa: 0.20, stealth: null,
        main:["wz. 08/39×10"],
        desc:{
          ja:"機雷をばら撒いて航路を封鎖する機雷専門。",
          en:"Minelayer specialist—controls routes by saturating areas with mines.",
          zh:"布雷专精：铺设水雷封锁航线。"
        },
        tags:{ ja:["中距離","水上艦","防衛","特殊（機雷）"], en:["Mid","Surface","Defense","Special (Mines)"], zh:["中距离","水面","防御","特殊(水雷)"] }
      },
      {
        level: 3,
        key:"oberon",
        name:"Oberon",
        type:"submarine",
        speed: 17.4, hp: 3.00, aa: null, stealth: null,
        main:["Mark 18×8"],
        desc:{
          ja:"無誘導魚雷8本搭載で、潜水の基本。",
          en:"Classic sub fundamentals—8 torpedoes and simple hunting patterns.",
          zh:"基础潜艇：8 发鱼雷，打法直观。"
        },
        tags:{ ja:["中距離","潜水艦","魚雷"], en:["Mid","Submarine","Torpedoes"], zh:["中距离","潜艇","鱼雷"] }
      },
      {
        level: 3,
        key:"osa",
        name:"Osa",
        type:"motor_torpedo_boat",
        speed: 42.0, hp: 1.29, aa: 0.11, stealth: null,
        main:["P-15 Termit×4","25 x 129 mmR×2"],
        desc:{
          ja:"対艦ミサイルで中距離から刺せる。",
          en:"Missile boat—poke from mid range with anti-ship missiles.",
          zh:"导弹快艇：中距离导弹点射。"
        },
        tags:{ ja:["中距離","水上艦","機動力","ミサイル"], en:["Mid","Surface","Mobility","Missiles"], zh:["中距离","水面","机动","导弹"] }
      },

      // Lv4
      {
        level: 4,
        key:"buyan",
        name:"Buyan",
        type:"corvette",
        speed: 25.9, hp: 2.50, aa: 0.17, stealth: 50,
        main:["Kalibr×4","130 x 720 mmR×1","Igla×4","…"],
        desc:{
          ja:"ステルス＋巡航ミサイル＋SAMで、隠れて撃って守れる小型艦。",
          en:"Stealth + cruise missiles + SAM—hit from cover and defend yourself.",
          zh:"隐身+巡航导弹+防空：能偷袭也能自保的小型舰。"
        },
        tags:{ ja:["遠距離","水上艦","ステルス","ミサイル","防衛（対空）"], en:["Long","Surface","Stealth","Missiles","AA Defense"], zh:["远距离","水面","隐身","导弹","防空"] }
      },
      {
        level: 4,
        key:"dreadnought",
        name:"Dreadnought",
        type:"dreadnought",
        speed: 21.0, hp: 5.36, aa: 0.29, stealth: null,
        main:["Mark 18×4","300 x 1400 mmR×10","…"],
        desc:{
          ja:"主砲10門＋無誘導魚雷4本で、砲撃寄りの重戦闘艦。",
          en:"Heavy brawler: 10 main guns plus extra torpedoes—gunnery focused.",
          zh:"重型火炮舰：10 门主炮 + 鱼雷，偏炮战。"
        },
        tags:{ ja:["遠距離","水上艦","砲撃"], en:["Long","Surface","Gunnery"], zh:["远距离","水面","炮击"] }
      },
      {
        level: 4,
        key:"dredger",
        name:"Dredger",
        type:"dredger",
        speed: 15.6, hp: 3.30, aa: null, stealth: null,
        main:["Depositor×1"],
        desc:{
          ja:"浚渫船で、攻撃は“Depositor”の特殊ギミック枠。",
          en:"A gimmick pick—uses a special “Depositor” mechanic rather than classic weapons.",
          zh:"挖泥船：以“Depositor”特殊机制为主的玩法。"
        },
        tags:{ ja:["近距離","水上艦","特殊（ギミック）","支援"], en:["Close","Surface","Special (Gimmick)","Support"], zh:["近距离","水面","特殊(机制)","支援"] }
      },
      {
        level: 4,
        key:"fletcher",
        name:"Fletcher",
        type:"destroyer",
        speed: 36.4, hp: 3.83, aa: 0.23, stealth: null,
        main:["Mark 18×10","127 x 680 mmR×4","Mark 9×4","…"],
        desc:{
          ja:"魚雷・砲・爆雷を大量搭載した、前線の王道駆逐艦。",
          en:"Frontline classic—tons of torps, guns, and ASW tools.",
          zh:"前线王道驱逐舰：鱼雷/火炮/反潜武装都很充足。"
        },
        tags:{ ja:["中距離","水上艦","汎用","魚雷","対潜"], en:["Mid","Surface","All-round","Torpedoes","ASW"], zh:["中距离","水面","全能","鱼雷","反潜"] }
      },
      {
        level: 4,
        key:"golf",
        name:"Golf",
        type:"submarine",
        speed: 16.9, hp: 3.28, aa: null, stealth: null,
        main:["Set 65×6"],
        desc:{
          ja:"高威力魚雷（Set 65）で水上艦を狩る、重めの潜水アタッカー。",
          en:"Heavier sub attacker—hunts surface ships with hard-hitting Set 65 torps.",
          zh:"重型潜艇输出：用高威力 Set 65 鱼雷猎杀水面舰。"
        },
        tags:{ ja:["中距離","潜水艦","魚雷"], en:["Mid","Submarine","Torpedoes"], zh:["中距离","潜艇","鱼雷"] }
      },

      // Lv5
      {
        level: 5,
        key:"arleigh_burke",
        name:"Arleigh Burke",
        type:"destroyer",
        speed: 33.0, hp: 5.13, aa: 0.28, stealth: 25,
        main:["Mark 54×6","Harpoon×8","127 x 680 mmR×1","…"],
        desc:{
          ja:"魚雷・対艦ミサイル・SAM・ヘリまで揃った“全部入り”の現代駆逐艦。",
          en:"Modern “all-in-one” destroyer—torps, anti-ship missiles, SAM, and heli tools.",
          zh:"现代“全能”驱逐舰：鱼雷/反舰导弹/防空/直升机一应俱全。"
        },
        tags:{ ja:["中距離","水上艦","ミサイル","防衛（対空）","対潜"], en:["Mid","Surface","Missiles","AA Defense","ASW"], zh:["中距离","水面","导弹","防空","反潜"] }
      },
      {
        level: 5,
        key:"leander",
        name:"Leander",
        type:"cruiser",
        speed: 32.4, hp: 5.64, aa: 0.31, stealth: null,
        main:["127 x 680 mmR×8","Mark 18×8","…"],
        desc:{
          ja:"砲と魚雷が多く、魚雷耐性もあって正面戦闘に強い。",
          en:"Strong head-on cruiser—lots of guns/torps and good torpedo resilience.",
          zh:"正面硬刚强：火炮鱼雷多，并且对鱼雷更耐受。"
        },
        tags:{ ja:["中距離","水上艦","砲撃","防衛"], en:["Mid","Surface","Gunnery","Defense"], zh:["中距离","水面","炮击","防御"] }
      },
      {
        level: 5,
        key:"oil_tanker",
        name:"Oil Tanker",
        type:"tanker",
        speed: 16.2, hp: 5.97, aa: null, stealth: null,
        main:["—"],
        desc:{
          ja:"武装なしだが、ptが倍増に。",
          en:"Unarmed, but can boost pt gains—purely a special-purpose pick.",
          zh:"无武装，但可提升 pt 获取——特殊用途。"
        },
        tags:{ ja:["近距離","水上艦","防衛","特殊（非武装）"], en:["Close","Surface","Defense","Special (Unarmed)"], zh:["近距离","水面","防御","特殊(无武装)"] }
      },
      {
        level: 5,
        key:"skipjack",
        name:"Skipjack",
        type:"submarine",
        speed: 33.0, hp: 2.56, aa: null, stealth: null,
        main:["Mark 48×4","Harpoon×2","MOSS×1","…"],
        desc:{
          ja:"高速で回り込み、誘導魚雷＋ミサイル＋デコイで粘り強く刺す。",
          en:"Fast flanker—guided torps + missiles + decoy for sustained pressure.",
          zh:"高速侧翼：制导鱼雷+导弹+诱饵，持续骚扰很强。"
        },
        tags:{ ja:["中距離","潜水艦","機動力","魚雷","防衛（デコイ）"], en:["Mid","Sub","Mobility","Torpedoes","Decoy"], zh:["中距离","潜艇","机动","鱼雷","诱饵"] }
      },
      {
        level: 5,
        key:"visby",
        name:"Visby",
        type:"corvette",
        speed: 35.0, hp: 2.42, aa: 0.16, stealth: 75,
        main:["Torped 45×4","RBS-15×8","57 x 441 mmR×1","…"],
        desc:{
          ja:"高ステルスで魚雷＋対艦ミサイル＋砲＋ヘリを運べる“隠密万能”。",
          en:"High-stealth all-rounder—torps, missiles, gun, and heli utility.",
          zh:"高隐身全能：鱼雷+反舰导弹+火炮+直升机能力。"
        },
        tags:{ ja:["中距離","水上艦","ステルス","ミサイル","対潜"], en:["Mid","Surface","Stealth","Missiles","ASW"], zh:["中距离","水面","隐身","导弹","反潜"] }
      },

      // Lv6
      {
        level: 6,
        key:"akula",
        name:"Akula",
        type:"submarine",
        speed: 35.0, hp: 3.78, aa: null, stealth: null,
        main:["Set 65×8","Igla×2","Brosok×2","…"],
        desc:{
          ja:"誘導魚雷8本に加えSAMとデコイも持つ、攻守バランス潜水艦。",
          en:"Balanced sub—8 guided torps plus SAM/decoy utility.",
          zh:"均衡潜艇：8 发制导鱼雷，并带防空/诱饵。"
        },
        tags:{ ja:["中距離","潜水艦","魚雷","防衛（デコイ）","防衛（対空）"], en:["Mid","Sub","Torpedoes","Decoy","AA"], zh:["中距离","潜艇","鱼雷","诱饵","防空"] }
      },
      {
        level: 6,
        key:"essex",
        name:"Essex",
        type:"carrier",
        speed: 32.7, hp: 8.86, aa: 0.45, stealth: null,
        main:["TBF Avenger×6","Mark 18×1","127 x 680 mmR×8","…"],
        desc:{
          ja:"艦載機で雷撃し、潜水艦に対しめっぽう強い。",
          en:"Carrier play—air strikes and strong pressure versus submarines.",
          zh:"航母：舰载机空袭，尤其克制潜艇。"
        },
        tags:{ ja:["遠距離","水上艦","航空"], en:["Long","Surface","Aviation"], zh:["远距离","水面","航空"] }
      },
      {
        level: 6,
        key:"freedom",
        name:"Freedom",
        type:"littoral",
        speed: 47.0, hp: 3.83, aa: 0.23, stealth: 50,
        main:["Naval Strike Missile×8","57 x 441 mmR×1","Rolling Airframe Missile×8","…"],
        desc:{
          ja:"高速＋ミサイル連射＋RAM＋ヘリで、機動力と対空が売りの小型現代艦。",
          en:"Fast modern ship—NSM burst + RAM, with strong mobility and AA.",
          zh:"高速现代舰：反舰导弹连射+RAM 防空，机动与防空突出。"
        },
        tags:{ ja:["中距離","水上艦","機動力","ミサイル","防衛（対空）"], en:["Mid","Surface","Mobility","Missiles","AA"], zh:["中距离","水面","机动","导弹","防空"] }
      },
      {
        level: 6,
        key:"kolkata",
        name:"Kolkata",
        type:"destroyer",
        speed: 29.9, hp: 5.43, aa: 0.30, stealth: 50,
        main:["Set 65×4","BrahMos×6","76 x 636 mmR×1","…"],
        desc:{
          ja:"超高速ミサイル（BrahMos）で中〜遠距離を一気に削るミサイル駆逐艦。",
          en:"Missile destroyer—BrahMos pressure that melts targets from mid/long range.",
          zh:"导弹驱逐舰：BrahMos 高速导弹，中远距离强力削血。"
        },
        tags:{ ja:["遠距離","水上艦","ミサイル","防衛（対空）"], en:["Long","Surface","Missiles","AA"], zh:["远距离","水面","导弹","防空"] }
      },
      {
        level: 6,
        key:"terry_fox",
        name:"Terry Fox",
        type:"icebreaker",
        speed: 16.0, hp: 2.93, aa: 0.19, stealth: null,
        main:["—"],
        desc:{
          ja:"武装なしだが氷山を削ることによりptが貰える、戦闘より“特殊枠”。",
          en:"Unarmed but earns pt by breaking ice—more special utility than combat.",
          zh:"无武装，但可通过破冰获得 pt，偏特殊用途。"
        },
        tags:{ ja:["近距離","水上艦","防衛","特殊（非武装）"], en:["Close","Surface","Defense","Special"], zh:["近距离","水面","防御","特殊"] }
      },
      {
        level: 6,
        key:"town",
        name:"Town",
        type:"cruiser",
        speed: 32.2, hp: 6.01, aa: 0.32, stealth: null,
        main:["127 x 680 mmR×12","Mark 18×6","Kingfisher×1","…"],
        desc:{
          ja:"砲と魚雷が多く、さらに水上機で雷撃もできる“多面攻撃”艦。",
          en:"Multi-angle attacker—lots of guns/torps plus seaplane torpedo threat.",
          zh:"多面进攻：火炮鱼雷多，还能用水上机雷击。"
        },
        tags:{ ja:["中距離","水上艦","砲撃","魚雷","航空"], en:["Mid","Surface","Gunnery","Torpedoes","Aviation"], zh:["中距离","水面","炮击","鱼雷","航空"] }
      },

      // Lv7
      {
        level: 7,
        key:"bismarck",
        name:"Bismarck",
        type:"battleship",
        speed: 29.9, hp: 8.05, aa: 0.41, stealth: null,
        main:["380 x 1700 mmR×8","Kingfisher×2","Mark 18×1","…"],
        desc:{
          ja:"主砲で殴り合いながら魚雷耐性も高い、重戦艦。",
          en:"Heavy battleship—wins trades with big guns and strong torpedo resilience.",
          zh:"重型战列舰：大炮对轰强，鱼雷抗性也高。"
        },
        tags:{ ja:["遠距離","水上艦","砲撃","防衛"], en:["Long","Surface","Gunnery","Defense"], zh:["远距离","水面","炮击","防御"] }
      },
      {
        level: 7,
        key:"moskva",
        name:"Moskva",
        type:"carrier",
        speed: 28.5, hp: 6.30, aa: 0.34, stealth: null,
        main:["Ka-25×4","82R×2","Set 65×10","…"],
        desc:{
          ja:"ヘリ空母。ヘリ雷撃＋大量魚雷＋SAMの“中距離制圧”が強み。",
          en:"Heli carrier—mid-range control with heli strikes, lots of torps and AA tools.",
          zh:"直升机航母：直升机雷击+大量鱼雷+防空，中距离压制强。"
        },
        tags:{ ja:["中距離","水上艦","航空（ヘリ）","魚雷","防衛（対空）"], en:["Mid","Surface","Aviation (Heli)","Torpedoes","AA"], zh:["中距离","水面","航空(直升机)","鱼雷","防空"] }
      },
      {
        level: 7,
        key:"ohio",
        name:"Ohio",
        type:"submarine",
        speed: 25.0, hp: 5.67, aa: null, stealth: null,
        main:["Mark 48×4","Tomahawk×10","MOSS×1","…"],
        desc:{
          ja:"魚雷に加えトマホークを大量搭載し、遠距離から継続火力を出せる。",
          en:"Heavy missile sub—Tomahawks provide sustained long-range pressure.",
          zh:"重型导弹潜艇：大量战斧带来持续远距离火力。"
        },
        tags:{ ja:["遠距離","潜水艦","ステルス","ミサイル","防衛（デコイ）"], en:["Long","Sub","Stealth","Missiles","Decoy"], zh:["远距离","潜艇","隐身","导弹","诱饵"] }
      },
      {
        level: 7,
        key:"skjold",
        name:"Skjold",
        type:"corvette",
        speed: 60.0, hp: 1.58, aa: 0.13, stealth: 75,
        main:["Naval Strike Missile×8","76 x 636 mmR×1","Mistral×6","…"],
        desc:{
          ja:"最高クラスの機動力＋高ステルスでミサイルを撃ち逃げできる。",
          en:"Top-tier speed + stealth—fire missiles and vanish (hit-and-fade).",
          zh:"顶级机动+高隐身：导弹打完就走。"
        },
        tags:{ ja:["中距離","水上艦","機動力","ステルス","ミサイル"], en:["Mid","Surface","Mobility","Stealth","Missiles"], zh:["中距离","水面","机动","隐身","导弹"] }
      },
      {
        level: 7,
        key:"type_055",
        name:"Type 055",
        type:"destroyer",
        speed: 29.9, hp: 6.00, aa: 0.32, stealth: 75,
        main:["82R×6","YJ-18×8","130 x 720 mmR×1","…"],
        desc:{
          ja:"ミサイル・魚雷・SAM・ヘリが揃った、ステルス寄りの現代万能艦。",
          en:"Modern stealth-leaning all-rounder—missiles/torps/AA/heli utility.",
          zh:"现代隐身全能：导弹/鱼雷/防空/直升机能力齐全。"
        },
        tags:{ ja:["中距離","水上艦","ステルス","ミサイル","防衛（対空）","対潜"], en:["Mid","Surface","Stealth","Missiles","AA","ASW"], zh:["中距离","水面","隐身","导弹","防空","反潜"] }
      },
      {
        level: 7,
        key:"type_212a",
        name:"Type 212A",
        type:"submarine",
        speed: 19.9, hp: 1.87, aa: null, stealth: 75,
        main:["DM2A4×6","IDAS×4","TAU 2000×4","…"],
        desc:{
          ja:"ゲーム内一の高ステルス。強魚雷＋潜航中の対空ミサイルも撃てる特殊潜水艦。",
          en:"One of the stealthiest subs—strong torps, plus underwater AA missile options.",
          zh:"游戏里顶级隐身：强鱼雷，还能潜航中发射对空导弹的特殊潜艇。"
        },
        tags:{ ja:["中距離","潜水艦","ステルス","魚雷","防衛（対空）","防衛（デコイ）"], en:["Mid","Sub","Stealth","Torpedoes","AA","Defense"], zh:["中距离","潜艇","隐身","鱼雷","防空","防御"] }
      },

      // Lv8
      {
        level: 8,
        key:"kirov",
        name:"Kirov",
        type:"cruiser",
        speed: 32.0, hp: 8.40, aa: 0.43, stealth: null,
        main:["130 x 720 mmR×2","Set 65×8","P-700 Granit×8","…"],
        desc:{
          ja:"ミサイル火力と対空が強い“ミサイル要塞”。魚雷＋ヘリ搭載。",
          en:"Missile fortress—strong missiles and AA, plus torps and heli utility.",
          zh:"“导弹要塞”：导弹火力与防空强，还带鱼雷与直升机。"
        },
        tags:{ ja:["遠距離","水上艦","ミサイル","防衛（対空）","対潜"], en:["Long","Surface","Missiles","AA","ASW"], zh:["远距离","水面","导弹","防空","反潜"] }
      },
      {
        level: 8,
        key:"montana",
        name:"Montana",
        type:"battleship",
        speed: 27.9, hp: 9.36, aa: 0.47, stealth: null,
        main:["Mark 8×12","Kingfisher×2","Mark 18×1","…"],
        desc:{
          ja:"主砲12門＋魚雷耐性で、超重戦艦。",
          en:"Super-heavy battleship—12 main guns and strong torpedo resilience.",
          zh:"超重战列舰：12 门主炮，鱼雷抗性强。"
        },
        tags:{ ja:["遠距離","水上艦","砲撃","防衛（対空）"], en:["Long","Surface","Gunnery","AA Defense"], zh:["远距离","水面","炮击","防空"] }
      },
      {
        level: 8,
        key:"tuo_chiang",
        name:"Tuo Chiang",
        type:"corvette",
        speed: 45.0, hp: 2.01, aa: 0.15, stealth: 75,
        main:["Mark 54×6","Hsiung Feng II×8","Hsiung Feng III×4","…"],
        desc:{
          ja:"ミサイル2系統＋魚雷で中距離火力が高い、高ステルス小型艦。",
          en:"High-stealth small ship with strong mid-range damage—two missile lines + torps.",
          zh:"高隐身小型舰：双导弹体系+鱼雷，中距离火力很高。"
        },
        tags:{ ja:["中距離","水上艦","ステルス","ミサイル","魚雷"], en:["Mid","Surface","Stealth","Missiles","Torpedoes"], zh:["中距离","水面","隐身","导弹","鱼雷"] }
      },
      {
        level: 8,
        key:"yasen",
        name:"Yasen",
        type:"submarine",
        speed: 35.0, hp: 4.33, aa: null, stealth: null,
        main:["Set 65×4","BrahMos×4","Vodopad×4","…"],
        desc:{
          ja:"魚雷・ミサイル・ロケット魚雷まで揃う“重武装潜水艦”。",
          en:"Heavily armed sub—torps, missiles, and rocket-torp options for versatility.",
          zh:"重武装潜艇：鱼雷+导弹+火箭鱼雷，功能全面。"
        },
        tags:{ ja:["遠距離","潜水艦","ステルス","ミサイル","魚雷","防衛（デコイ）"], en:["Long","Sub","Stealth","Missiles","Torpedoes","Decoy"], zh:["远距离","潜艇","隐身","导弹","鱼雷","诱饵"] }
      },
      {
        level: 8,
        key:"zumwalt",
        name:"Zumwalt",
        type:"destroyer",
        speed: 29.9, hp: 6.33, aa: 0.34, stealth: 75,
        main:["Tomahawk×8","ASROC×4","Mark 54×1","…"],
        desc:{
          ja:"ステルス＋ミサイル＋ロケット魚雷＋速射砲で、遠距離から削る。",
          en:"Stealth destroyer—missiles + ASROC + rapid gun; chip from long range.",
          zh:"隐身驱逐舰：导弹+反潜火箭+速射炮，远距离消耗强。"
        },
        tags:{ ja:["遠距離","水上艦","ステルス","ミサイル","防衛（対空）","対潜"], en:["Long","Surface","Stealth","Missiles","AA","ASW"], zh:["远距离","水面","隐身","导弹","防空","反潜"] }
      },

      // Lv9
      {
        level: 9,
        key:"clemenceau",
        name:"Clemenceau",
        type:"carrier",
        speed: 32.0, hp: 8.83, aa: 0.45, stealth: null,
        main:["Super Étendard×6","Exocet×1","Magic×1","…"],
        desc:{
          ja:"艦載機で対艦ミサイル攻撃しつつ、SAMやヘリもある攻守空母。",
          en:"Carrier with anti-ship missile strikes, plus defensive tools (SAM/heli).",
          zh:"攻守兼备航母：舰载机反舰打击，同时有防空/直升机等。"
        },
        tags:{ ja:["遠距離","水上艦","航空","ミサイル","防衛（対空）"], en:["Long","Surface","Aviation","Missiles","AA"], zh:["远距离","水面","航空","导弹","防空"] }
      },
      {
        level: 9,
        key:"seawolf",
        name:"Seawolf",
        type:"submarine",
        speed: 35.0, hp: 3.60, aa: null, stealth: 50,
        main:["Mark 48×8","MOSS×2","…"],
        desc:{
          ja:"高火力魚雷を高速回転で撃てて、デコイ2本で粘りやすい潜水艦＋ステルス。",
          en:"High-output torp sub with good tempo; 2 decoys help you survive longer.",
          zh:"高输出潜艇：鱼雷循环快，2 个诱饵更耐打。"
        },
        tags:{ ja:["中距離","潜水艦","ステルス","魚雷","防衛（デコイ）"], en:["Mid","Sub","Stealth","Torpedoes","Decoy"], zh:["中距离","潜艇","隐身","鱼雷","诱饵"] }
      },
      {
        level: 9,
        key:"yamato",
        name:"Yamato",
        type:"battleship",
        speed: 27.0, hp: 8.77, aa: 0.45, stealth: null,
        main:["458 x 1980 mmR×9","Nakajima E4N×4","Mark 18×1","…"],
        desc:{
          ja:"超高威力の主砲で一撃を狙う、砲撃特化のロマン戦艦。",
          en:"Romance battleship—massive main guns built to land big hits.",
          zh:"浪漫战列舰：超高威力主炮，追求一击致命。"
        },
        tags:{ ja:["遠距離","水上艦","砲撃","防衛"], en:["Long","Surface","Gunnery","Defense"], zh:["远距离","水面","炮击","防御"] }
      },

      // Lv10
      {
        level: 10,
        key:"iowa",
        name:"Iowa",
        type:"battleship",
        speed: 33.0, hp: 9.01, aa: 0.46, stealth: null,
        main:["Mark 8×9","Tomahawk×16","Seahawk×3","…"],
        desc:{
          ja:"砲撃＋ミサイルの両方が強い最上位戦艦。",
          en:"Top-tier battleship—strong gunnery plus heavy missile loadout.",
          zh:"顶级战列舰：炮击与导弹双强。"
        },
        tags:{ ja:["遠距離","水上艦","砲撃","ミサイル","防衛"], en:["Long","Surface","Gunnery","Missiles","Defense"], zh:["远距离","水面","炮击","导弹","防御"] }
      }
    ];

    // ---------------------------
    // Utils
    // ---------------------------
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

    const PLACEHOLDER_SVG = encodeURIComponent(`
      <svg xmlns="http://www.w3.org/2000/svg" width="320" height="180">
        <defs>
          <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#ffe3e7"/>
            <stop offset="0.5" stop-color="#ffffff"/>
            <stop offset="1" stop-color="#f3f6ff"/>
          </linearGradient>
        </defs>
        <rect width="100%" height="100%" fill="url(#g)"/>
        <g fill="none" stroke="#e60012" stroke-opacity=".35" stroke-width="4">
          <circle cx="62" cy="90" r="26"/>
          <circle cx="62" cy="90" r="44" stroke-opacity=".16"/>
        </g>
        <text x="118" y="102" font-family="ui-monospace, Menlo, Consolas" font-size="18" fill="#0b1020" fill-opacity=".55">
          mk48.io
        </text>
      </svg>
    `);
    const PLACEHOLDER = `data:image/svg+xml;charset=utf-8,${PLACEHOLDER_SVG}`;

    function fmt(n){
      if (n === null || n === undefined) return "—";
      return typeof n === "number" ? n.toFixed( (String(n).includes(".")) ? 1 : 0 ) : String(n);
    }

    // ---------------------------
    // State
    // ---------------------------
    const state = {
      lang: "ja",
      search: "",
      level: "all",
      type: "all",
      sideTab: "tips"
    };

    // ---------------------------
    // Render Points
    // ---------------------------
    function renderPoints(){
      const tbody = $("#pointsBody");
      if(!tbody) return;
      tbody.innerHTML = "";
      for(const row of LEVEL_POINTS){
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>Lv${row.level}</td>
          <td>${row.pt}</td>
        `;
        tbody.appendChild(tr);
      }
    }

    // ---------------------------
    // Filters
    // ---------------------------
    function uniqueTypes(){
      const set = new Set(SHIPS.map(s => s.type));
      return Array.from(set);
    }

    
function renderFilters(){
      const dict = I18N[state.lang] || I18N.ja;

      const lvSel = $("#levelSel");
      if (lvSel){
        lvSel.innerHTML = "";
        const optAll = document.createElement("option");
        optAll.value = "all";
        optAll.textContent = dict["ships.optAll"] || "All";
        lvSel.appendChild(optAll);

        const levels = Array.from(new Set(SHIPS.map(s => s.level))).sort((a,b)=>a-b);
        for(const lv of levels){
          const o = document.createElement("option");
          o.value = String(lv);
          o.textContent = `Lv${lv}`;
          lvSel.appendChild(o);
        }
        lvSel.value = state.level;
      }

      const typeSel = $("#typeSel");
      if (typeSel){
        typeSel.innerHTML = "";
        const optAll2 = document.createElement("option");
        optAll2.value = "all";
        optAll2.textContent = typeLabel("all");
        typeSel.appendChild(optAll2);

        for(const t of uniqueTypes()){
          const o = document.createElement("option");
          o.value = t;
          o.textContent = typeLabel(t);
          typeSel.appendChild(o);
        }
        typeSel.value = state.type;
      }
    }


    function chipBtn(label, value, current, onClick){
      const b = document.createElement("button");
      b.type = "button";
      b.className = "chip2" + (value===current ? " active" : "");
      b.textContent = label;
      b.addEventListener("click", onClick);
      return b;
    }

    function typeLabel(t){
      if (t === "all"){
        return (I18N[state.lang] || I18N.ja)["ships.optAll"] || "All";
      }
      const dict = TYPE_LABELS[state.lang] || TYPE_LABELS.ja;
      return dict[t] || t;
    }

    // ---------------------------
    // Ship Rendering
    // ---------------------------
    function shipImageSrc(ship){
      // You can swap images by placing files here (optional):
      // assets/ships/{key}.jpg
      // If not found, it will fallback.
      return `assets/ships/${ship.key}.jpg`;
    }

    function matches(ship){
      const q = state.search.trim().toLowerCase();
      const lang = state.lang;
      const typeName = (TYPE_LABELS[lang]?.[ship.type] || "").toLowerCase();
      const name = ship.name.toLowerCase();
      const desc = (ship.desc?.[lang] || ship.desc?.ja || "").toLowerCase();

      const bySearch = !q || name.includes(q) || typeName.includes(q) || desc.includes(q);
      const byLevel = state.level === "all" || String(ship.level) === state.level;
      const byType = state.type === "all" || ship.type === state.type;
      return bySearch && byLevel && byType;
    }

    function groupByLevel(items){
      const map = new Map();
      for(const s of items){
        if(!map.has(s.level)) map.set(s.level, []);
        map.get(s.level).push(s);
      }
      return Array.from(map.entries()).sort((a,b)=>a[0]-b[0]);
    }

    

function renderShips(){
      const root = $("#shipsContainer");
      if(!root) return;
      root.innerHTML = "";

      const filtered = SHIPS.filter(matches);
      // update counters
      const fmtShown = (n) => {
        if (state.lang === "ja") return `表示：${n}隻`;
        if (state.lang === "en") return `Shown: ${n}`;
        return `显示：${n}艘`;
      };
      const top = $("#shipCountTop");
      if(top) top.textContent = fmtShown(filtered.length);
      const right = $("#shipCountRight");
      if(right) right.textContent = fmtShown(filtered.length);

      const groups = groupByLevel(filtered);

      if(filtered.length === 0){
        const empty = document.createElement("div");
        empty.className = "card pad soft";
        empty.innerHTML = `
          <b style="display:block;margin-bottom:6px;">No results</b>
          <div class="muted">Try another keyword or reset filters.</div>
        `;
        root.appendChild(empty);
        return;
      }

      const countLabel = (n) => {
        if (state.lang === "ja") return `${n}隻`;
        if (state.lang === "en") return `${n} ships`;
        return `${n}艘`;
      };

      for(const [lv, ships] of groups){
        const group = document.createElement("div");
        group.className = "levelGroup reveal";
        group.innerHTML = `
          <div class="levelTitle">
            <h3><span class="badge">Lv${lv}</span></h3>
            <span class="muted" style="font-weight:900;font-size:12.5px;">${countLabel(ships.length)}</span>
          </div>
          <div class="shipList"></div>
        `;
        const list = $(".shipList", group);

        for(const ship of ships){
          const d = document.createElement("details");
          d.className = "ship";

          const lang = state.lang;
          const shipType = TYPE_LABELS[lang]?.[ship.type] || TYPE_LABELS.ja[ship.type] || ship.type;
          const desc = ship.desc?.[lang] || ship.desc?.ja || "";
          const tags = ship.tags?.[lang] || ship.tags?.ja || [];

          const stealth = ship.stealth === null || ship.stealth === undefined ? "—" : `${ship.stealth}%`;
          const aa = ship.aa === null || ship.aa === undefined ? "—" : ship.aa;

          const mainList = (ship.main || []).slice(0, 3).filter(Boolean);
          const hasEllipsis = (ship.main || []).includes("…") || (ship.main || []).length > 3;

          d.innerHTML = `
            <summary class="shipSum">
              <div class="shipLeft">
                <div class="thumb">
                  <img alt="${ship.name}" src="${shipImageSrc(ship)}" loading="lazy">
                </div>
                <div class="shipMeta">
                  <div class="shipName">${ship.name}</div>
                  <div class="chipsMini">
                    <span class="tag soft">${shipType}</span>
                    <span class="tag">Lv${ship.level}</span>
                    ${(tags||[]).slice(0,2).map(t=>`<span class="tag">${t}</span>`).join("")}
                  </div>
                </div>
              </div>
              <div class="caret" aria-hidden="true">⌄</div>
            </summary>

            <div class="shipBody">
              <div class="shipBodyInner">
                <div class="statsGrid">
                  <div class="stat">
                    <small>${statLabel("speed")}</small>
                    <b>${fmt(ship.speed)}kn</b>
                  </div>
                  <div class="stat">
                    <small>${statLabel("hp")}</small>
                    <b>${fmt(ship.hp)}</b>
                  </div>
                  <div class="stat">
                    <small>${statLabel("aa")}</small>
                    <b>${aa}</b>
                  </div>
                  <div class="stat">
                    <small>${statLabel("stealth")}</small>
                    <b>${stealth}</b>
                  </div>
                </div>

                <div class="mainLine">
                  <span class="muted">${statLabel("main")}</span>
                  <b>${mainList.join(" / ")}${hasEllipsis ? " …" : ""}</b>
                </div>

                ${desc ? `<div class="desc">${escapeHtml(desc)}</div>` : ""}
              </div>
            </div>
          `;
          list.appendChild(d);
        }

        root.appendChild(group);
      }

      // make sure reveal elements become visible after re-render
      if (typeof observeReveals === "function") observeReveals();
    }



    function levelTitleText(){
      if (state.lang === "ja") return "艦艇一覧";
      if (state.lang === "en") return "Ship List";
      return "舰艇列表";
    }

    function statLabel(key){
      const dict = {
        ja:{ speed:"速力", hp:"耐久", aa:"対空", stealth:"隠密", main:"主" },
        en:{ speed:"Speed", hp:"Durability", aa:"AA", stealth:"Stealth", main:"Main" },
        zh:{ speed:"速度", hp:"耐久", aa:"防空", stealth:"隐蔽", main:"主武器" }
      };
      return dict[state.lang][key] || key;
    }

    function escapeHtml(s){
      return String(s)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // ---------------------------
    // Apply i18n
    // ---------------------------
    
function applyI18n(){
      const dict = I18N[state.lang] || I18N.ja;

      $$("[data-i18n]").forEach(el => {
        const k = el.getAttribute("data-i18n");
        const v = dict[k];
        if (v === undefined) return;
        el.innerHTML = v;
      });

      const search = $("#searchInput");
      if (search){
        search.placeholder = dict["ships.searchPh"] || (state.lang === "ja"
          ? "例：Iowa / 戦艦 / 潜水艦 / stealth"
          : state.lang === "en"
            ? "e.g. Iowa / battleship / submarine / stealth"
            : "例：Iowa / 战列舰 / 潜艇 / stealth");
      }

      renderFilters();
    }


    function setLang(lang){
      state.lang = lang;
      localStorage.setItem("mk48_lang", lang);

      // update buttons (desktop)
      $$(".langBtn").forEach(b => {
        const on = b.dataset.lang === lang;
        b.setAttribute("aria-pressed", on ? "true" : "false");
        b.classList.toggle("active", on);
      });

      // update html lang
      try{
        document.documentElement.lang = (lang === "ja" ? "ja" : (lang === "en" ? "en" : "zh"));
      }catch(_){/* noop */}

      // update mobile select
      const mobileSel = $("#langSelectMobile");
      if (mobileSel) mobileSel.value = lang;

      applyI18n();
      renderShips();
    }

    // ---------------------------
    // Side tabs
    // ---------------------------
    function setSideTab(tab){
      state.sideTab = tab;
      $$(".tabBtn").forEach(b => b.setAttribute("aria-pressed", b.dataset.tab === tab ? "true":"false"));

      if (tab === "overview"){
        // mirror overview summary
        const dict = I18N[state.lang];
        $("#sideMsg").innerHTML =
          `${dict["overview.block.title"]}<br><span class="muted">${dict["overview.block.game"].slice(0, 130)}…</span>`;
      }else{
        const dict = I18N[state.lang];
        $("#sideMsg").innerHTML =
          `${dict["side.msg.1"]}<br>${dict["side.msg.2"]}<br>${dict["side.msg.3"]}`;
      }
    }

    // ---------------------------
    // Drawer
    // ---------------------------
    function setDrawer(open){
      const backdrop = $("#drawerBackdrop");
      const drawer = $("#drawer");
      if(open){
        backdrop.classList.add("open");
        drawer.classList.add("open");
        document.body.style.overflow = "hidden";
      }else{
        backdrop.classList.remove("open");
        drawer.classList.remove("open");
        document.body.style.overflow = "";
      }
    }

    // ---------------------------
    // Reveal animation
    // ---------------------------
    let revealObserver = null;
    function observeReveals(){
      if(revealObserver) revealObserver.disconnect();
      const items = $$(".reveal:not(.in)");
      if(items.length === 0) return;

      revealObserver = new IntersectionObserver((entries)=>{
        for(const e of entries){
          if(e.isIntersecting){
            e.target.classList.add("in");
            revealObserver.unobserve(e.target);
          }
        }
      }, { threshold: 0.12 });

      items.forEach(el => revealObserver.observe(el));
    }

    // ---------------------------
    // Apply
    // ---------------------------
    
function apply(){
      // sync UI (if present) then re-render
      const lvSel = $("#levelSel");
      if (lvSel) lvSel.value = state.level;
      const typeSel = $("#typeSel");
      if (typeSel) typeSel.value = state.type;

      renderShips();
    }


    // ---------------------------
    // Init
    // ---------------------------
    function init(){
      renderPoints();

      // Language init
      const saved = localStorage.getItem("mk48_lang");
      const initialLang = (saved && ["ja","en","zh"].includes(saved)) ? saved : "ja";
      setLang(initialLang);

            // Search & filters
      const searchEl = $("#searchInput");
      if (searchEl){
        searchEl.addEventListener("input", (e)=>{
          state.search = e.target.value || "";
          renderShips();
        });
      }

      const lvSel = $("#levelSel");
      if (lvSel){
        lvSel.addEventListener("change", (e)=>{
          state.level = e.target.value || "all";
          apply();
        });
      }

      const typeSel = $("#typeSel");
      if (typeSel){
        typeSel.addEventListener("change", (e)=>{
          state.type = e.target.value || "all";
          apply();
        });
      }

// Language buttons
      $$(".langBtn").forEach(b => b.addEventListener("click", ()=> setLang(b.dataset.lang)));
      const langSel = $("#langSelectMobile");
      if (langSel) langSel.addEventListener("change", (e)=> setLang(e.target.value));

      // Side tabs
      $$(".tabBtn").forEach(b => b.addEventListener("click", ()=> setSideTab(b.dataset.tab)));

      // Drawer
      $("#menuBtn").addEventListener("click", ()=> setDrawer(true));
      $("#drawerClose").addEventListener("click", ()=> setDrawer(false));
      $("#drawerBackdrop").addEventListener("click", ()=> setDrawer(false));
      $$("#drawer a").forEach(a => a.addEventListener("click", ()=> setDrawer(false)));

      // Smooth scroll
      $$('a[href^="#"]').forEach(a=>{
        a.addEventListener("click", (e)=>{
          const href = a.getAttribute("href");
          if(!href || href === "#") return;
          const target = document.querySelector(href);
          if(!target) return;
          e.preventDefault();
          target.scrollIntoView({ behavior: "smooth", block: "start" });
        });
      });

      observeReveals();
    }

    // ---------------------------
    // Opening (OP) sequence
    // ---------------------------
    function runOpeningSequence(){
      const opening = document.getElementById("opening-layer");
      if(!opening) return;

      // Start the radar ping rings, if present
      try{
        opening.querySelectorAll(".op-ping").forEach(el => el.classList.add("active"));
      }catch(_){/* noop */}

      // Timing: keep the OP on screen a bit longer, then fade out
      const FADE_START_MS = 3200; // user request: a bit slower
      const FADE_DURATION_MS = 1100; // must align with CSS transition (~1s)

      // Fade out
      window.setTimeout(()=>{
        opening.classList.add("hidden");
      }, FADE_START_MS);

      // Remove from DOM (prevents blocking clicks if something goes wrong)
      window.setTimeout(()=>{
        try{ opening.remove(); }catch(_){/* noop */}
      }, FADE_START_MS + FADE_DURATION_MS + 80);

      // Reveal header around fade time
      const header = document.getElementById("mainHeader");
      if(header){
        window.setTimeout(()=>{
          header.classList.remove("hidden-start");
        }, Math.max(0, FADE_START_MS - 200));
      }
    }

    // ---------------------------
    // Boot
    // ---------------------------
    function boot(){
      // Ensure OP never blocks the page, even if init throws.
      runOpeningSequence();

      try{ init(); }catch(err){
        console.error(err);
        document.querySelectorAll(".reveal").forEach(el=>el.classList.add("in"));
      }

      // Safety: always populate year if the footer still has it
      const y = document.getElementById("year");
      if(y) y.textContent = String(new Date().getFullYear());
    }

    if(document.readyState === "loading"){
      document.addEventListener("DOMContentLoaded", boot, { once:true });
    }else{
      boot();
    }